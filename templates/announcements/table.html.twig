<table class="dt-advanced-search table">
    <thead>
    <tr>
        <th></th>
        <th>Name</th>
        <th>Target</th>
        <th>Content</th>
        <th>Images</th>
        <th>Date</th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    {% for post in announcements %}
        <tr>
            <td></td>

            <td>{{ post.name }}</td>
            <td>{% for dep in post.departments %}{{ dep }}<br>{% endfor %}</td>


            <td>{{ post.announcement.content }}</td>
            <td>
                {% for image in post.announcement.images %}
                    <img src="/uploads/announcement/{{ image.imageName }}" alt="{{ image.imageName  }} " height="100" width="100">
                    <a {{ stimulus_controller('delete-item',{
                                'url': path('app_announcement_delete_image', {'id': image.id})
                            }) }}
                            data-action="click->delete-item#deleteItem" >
                        <i class="fa-solid fa-trash"></i>
                    </a>
                {% endfor%}
            </td>
            <td>{{ post.publishDate|date('j F Y') }}</td>

            <td>
                <div class="dropdown">
                    <button type="button"
                            class="btn btn-sm dropdown-toggle hide-arrow py-0"
                            data-bs-toggle="dropdown">
                        <i class="fa-solid fa-ellipsis-vertical"></i>
                    </button>
                    <div  class="dropdown-menu dropdown-menu-end">
                        <a class="dropdown-item"
                                {{ stimulus_controller('edit-item',{
                                    'url': path('app_announcement_update', {'id': post.id, 'ajax': 1, 'announcementId': post.announcement.id})
                                }) }}
                           data-action="click->edit-item#openEditModal"
                        >
                            <i class="fa-solid fa-pen"></i>
                            <span>Update</span>
                        </a>
                        <a class="dropdown-item"
                                {{ stimulus_controller('delete-item',{
                                    'url': path('app_announcement_delete', {'id': post.id})
                                }) }}
                           data-action="click->delete-item#deleteItem" >
                            <i class="fa-solid fa-trash"></i>
                            <span> Delete</span>
                        </a>
                        <a class="dropdown-item"
                                {{ stimulus_controller('comment-post',{
                                    'url': path('app_post_comment', {'id': post.id, 'ajax': 1})
                                }) }}
                           data-action="click->comment-post#comments" >
                            <i class="fas fa-comment"></i>
                            <span> Comments</span>
                        </a>

                    </div>
                </div>
            </td>
        </tr>
    {% endfor %}
    <tfoot>
    <tr>
        <th></th>
        <th>Name</th>
        <th>Target</th>
        <th>Content</th>
        <th>Images</th>
        <th>Date</th>
        <th>Actions</th>
    </tfoot>
</table>
<div id="test"></div>
<div id="comment"></div>