<!-- add new card modal  -->
<div
        class="modal fade" id="modal"
        data-target="modal"
        tabindex="-1" aria-labelledby="addNewCardTitle"
        aria-hidden="true"
        data-modal-form-target="modal"
>
    <div data-target="modal" class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-transparent">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body px-sm-5 mx-50 pb-5">
                <h1 data-action="click->modal-form#hideModal" class="text-center mb-1"
                    id="addNewCardTitle">{{ modalTitle }}</h1>
                <p class="text-center">Add card for future billing</p>

                <!-- form -->
                <div id="addNewCardValidation" class="row gy-1 gx-2 mt-75" {{ stimulus_controller('modal-form') }}
                     data-modal-form-target="modalBody">
                    {{ form_start(form,{'attr':{'action':path(routeName),'role':'form','enctype':'multipart/form-data'}}) }}
                    {% if extraForm is not empty %}
                        {{ form_start(extraForm,{'attr':{'action':path(routeName),'role':'form','enctype':'multipart/form-data'}}) }}
                    {% endif %}
                    {% if secondExtraForm is not empty %}
                        {{ form_start(secondExtraForm,{'attr':{'action':path(routeName),'role':'form','enctype':'multipart/form-data'}}) }}
                    {% endif %}
                    {{ form_widget(form) }}
                    {% if extraForm is not empty %}
                        {{ form_widget(extraForm) }}
                       {# <div class="d-inline-grid">
                            <div class="cat action">
                                <label>
                                    <input type="checkbox" name="target[]" value="All"><span>All</span>
                                </label>
                            </div>
                            <div class="cat action">
                                <label>
                                    <input type="checkbox" name="target[]" value="IT"><span>IT</span>
                                </label>
                            </div>
                            <div class="cat action">
                                <label>
                                    <input type="checkbox" name="target[]" value="Marketing"><span>Marketing</span>
                                </label>
                            </div>
                            <div class="cat action">
                                <label>
                                    <input type="checkbox" name="target[]" value="Dev-Co"><span>Dev-Co</span>
                                </label>
                            </div>
                            <div class="cat action">
                                <label>
                                    <input type="checkbox" name="target[]" value="Business"><span>Business</span>
                                </label>
                            </div>
                        </div>

                        <style>
                            .cat{
                                background-color: #1A3969;
                                border-radius: 4px;
                                border: 1px solid #fff;
                                overflow: hidden;
                                display: inline-block;
                            }

                            .cat label {
                                line-height: 3.0em;
                                width: 8.0em; height: 3.0em;
                            }

                            .cat label span {
                                text-align: center;
                                padding: 2px 3px;
                                display: block;
                            }

                            .cat label input {
                                position: absolute;
                                display: none;
                                color: #fff !important;
                            }

                            .cat label input + span{color: #fff;}

                            .cat input:checked + span {
                                color: #ffffff;
                                text-shadow: 0 0  6px rgba(0, 0, 0, 0.8);
                            }

                            .action input:checked + span{background-color: #5ab8de;}
                        </style>#}
                    {% endif %}
                    {% if secondExtraForm is not empty %}
                        {{ form_widget(secondExtraForm) }}
                    {% endif %}
                    {% if modalTitle == 'New Announcement' %}
                        <div class="mb-3">
                            <label for="announcement" class="form-label">Images</label>
                            <input class="form-control" type="file" id="announcement" accept="image/*" name="announcement[]" multiple>
                        </div>
                    {% endif %}
                    {% if modalTitle == 'New Resource' %}
                        <div>
                            <div class="form-group" id="formGroupTemplate">
                                <label>Links</label>
                                <input type="text" class="form-control" name="links[]">
                            </div>
                        </div>
                        <div class="col-12 text-center">
                            <button type="button" class="btn btn-primary mt-2" id="addItemButton">Add Item</button>
                            <button type="button" class="btn btn-danger mt-2" id="removeItemButton">Delete Item</button>
                        </div>
                    {% endif %}
                    {% if modalTitle == 'New Poll' %}
                        <div>
                            <div class="form-group mb-2" id="formGroupTemplate">
                                <label>Option</label>
                                <input type="text" class="form-control mb-2" id="inputCloned" name="options[]">
                            </div>
                        </div>
                        <div class="col-12 text-center">
                            <button type="button" class="btn btn-primary mt-2" id="addItemButton">Add Item</button>
                            <button type="button" class="btn btn-danger mt-2" id="removeItemButton">Delete Item</button>
                        </div>
                    {% endif %}
                    {% set roles = ['ROLE_IT','ROLE_BUSINESS','ROLE_DEVCO','ROLE_MARKETING'] %}
                     {% if modalTitle == 'New Workshop' %}
                         {% for role in roles %}
                             {% if role in app.user.roles %}
                             <style>
                                 fieldset{
                                     display: none!important;
                                 }
                             </style>
                                {% endif %}
                         {% endfor %}
                    {% endif %}
                    <div class="col-12 text-center">
                        <button type="submit" class="btn btn-primary me-1 mt-1" data-action="modal-form#submitForm">
                            <span id="submitButtonSpan">Submit</span>
                            <img id="loadingButton" style="display: none" src="{{ asset('loading.gif') }}" alt="" height="20" width="20">
                        </button>
                        <button type="reset" class="btn btn-outline-secondary mt-1" data-bs-dismiss="modal"
                                aria-label="Close">
                            Cancel
                        </button>
                    </div>
                    {{ form_end(form) }}
                    {% if extraForm is not empty %}
                        {{ form_end(extraForm) }}
                    {% endif %}
                    {% if secondExtraForm is not empty %}
                        {{ form_end(secondExtraForm) }}
                    {% endif %}


                </div>
            </div>
        </div>
    </div>
</div>
<script>
    let checkbox = document.getElementById('post_form_departments_9');
    let inputs = document.querySelectorAll('input[type=checkbox]');
    // remove the checkbox from the list of inputs
    inputs = Array.prototype.filter.call(inputs, function (input) {
        return input !== checkbox;
    });

    checkbox.addEventListener('change', function () {
        for (let i = 0; i < inputs.length; i++) {
            inputs[i].disabled = this.checked;
            // if the checkbox is checked, uncheck all the other inputs
            if (this.checked) {
                inputs[i].checked = false;
            }
        }
    });

</script>
<!--/ add new card modal  -->